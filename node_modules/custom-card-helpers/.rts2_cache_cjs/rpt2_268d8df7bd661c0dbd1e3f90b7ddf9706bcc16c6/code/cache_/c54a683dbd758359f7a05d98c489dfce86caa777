{"code":"import { formatDateTime } from \"./datetime/format_date_time\";\r\nimport { formatDate } from \"./datetime/format_date\";\r\nimport { formatTime } from \"./datetime/format_time\";\r\nimport { computeStateDomain } from \"./compute-state-domain\";\r\nimport { formatNumber } from \"./format-number\";\r\nexport function computeStateDisplay(localize, stateObj, locale, state) {\r\n    const compareState = state !== undefined ? state : stateObj.state;\r\n    if (compareState === \"unknown\" || compareState === \"unavailable\") {\r\n        return localize(`state.default.${compareState}`);\r\n    }\r\n    if (stateObj.attributes.unit_of_measurement) {\r\n        return `${formatNumber(compareState, locale)} ${stateObj.attributes.unit_of_measurement}`;\r\n    }\r\n    const domain = computeStateDomain(stateObj);\r\n    if (domain === \"input_datetime\") {\r\n        let date;\r\n        if (!stateObj.attributes.has_time) {\r\n            date = new Date(stateObj.attributes.year, stateObj.attributes.month - 1, stateObj.attributes.day);\r\n            return formatDate(date, locale);\r\n        }\r\n        if (!stateObj.attributes.has_date) {\r\n            const now = new Date();\r\n            date = new Date(\r\n            // Due to bugs.chromium.org/p/chromium/issues/detail?id=797548\r\n            // don't use artificial 1970 year.\r\n            now.getFullYear(), now.getMonth(), now.getDay(), stateObj.attributes.hour, stateObj.attributes.minute);\r\n            return formatTime(date, locale);\r\n        }\r\n        date = new Date(stateObj.attributes.year, stateObj.attributes.month - 1, stateObj.attributes.day, stateObj.attributes.hour, stateObj.attributes.minute);\r\n        return formatDateTime(date, locale);\r\n    }\r\n    if (domain === \"humidifier\") {\r\n        if (compareState === \"on\" && stateObj.attributes.humidity) {\r\n            return `${stateObj.attributes.humidity} %`;\r\n        }\r\n    }\r\n    // `counter` and `number` domains do not have a unit of measurement but should still use `formatNumber`\r\n    if (domain === \"counter\" || domain === \"number\") {\r\n        return formatNumber(compareState, locale);\r\n    }\r\n    return (\r\n    // Return device class translation\r\n    (stateObj.attributes.device_class &&\r\n        localize(`component.${domain}.state.${stateObj.attributes.device_class}.${stateObj.state}`)) ||\r\n        // Return default translation\r\n        localize(`component.${domain}.state._.${stateObj.state}`) ||\r\n        // We don't know! Return the raw state.\r\n        stateObj.state);\r\n}\r\n//# sourceMappingURL=compute-state-display.js.map","map":"{\"version\":3,\"file\":\"compute-state-display.js\",\"sourceRoot\":\"\",\"sources\":[\"../../src/compute-state-display.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/iantrich/Projects/hass/plugins/custom-card-helpers/compute-state-display.d.ts","writeByteOrderMark":false,"text":"import { HassEntity } from \"home-assistant-js-websocket\";\r\nimport { LocalizeFunc } from \"./translations/localize\";\r\nimport { FrontendTranslationData } from \"./types\";\r\nexport declare function computeStateDisplay(localize: LocalizeFunc, stateObj: HassEntity, locale: FrontendTranslationData, state?: string): string;\r\n"}}
