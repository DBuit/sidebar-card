{"code":"import { fireEvent } from \"./fire-event\";\r\nconst SPECIAL_TYPES = new Set([\r\n    \"call-service\",\r\n    \"divider\",\r\n    \"section\",\r\n    \"weblink\",\r\n    \"cast\",\r\n    \"select\"\r\n]);\r\nconst DOMAIN_TO_ELEMENT_TYPE = {\r\n    alert: \"toggle\",\r\n    automation: \"toggle\",\r\n    climate: \"climate\",\r\n    cover: \"cover\",\r\n    fan: \"toggle\",\r\n    group: \"group\",\r\n    input_boolean: \"toggle\",\r\n    input_number: \"input-number\",\r\n    input_select: \"input-select\",\r\n    input_text: \"input-text\",\r\n    light: \"toggle\",\r\n    lock: \"lock\",\r\n    media_player: \"media-player\",\r\n    remote: \"toggle\",\r\n    scene: \"scene\",\r\n    script: \"script\",\r\n    sensor: \"sensor\",\r\n    timer: \"timer\",\r\n    switch: \"toggle\",\r\n    vacuum: \"toggle\",\r\n    // Temporary. Once climate is rewritten,\r\n    // water heater should get it's own row.\r\n    water_heater: \"climate\",\r\n    input_datetime: \"input-datetime\"\r\n};\r\nexport const createThing = (cardConfig, isRow = false) => {\r\n    const _createError = (error, config) => {\r\n        return _createThing(\"hui-error-card\", {\r\n            type: \"error\",\r\n            error,\r\n            config\r\n        });\r\n    };\r\n    const _createThing = (tag, config) => {\r\n        const element = window.document.createElement(tag);\r\n        try {\r\n            element.setConfig(config);\r\n        }\r\n        catch (err) {\r\n            console.error(tag, err);\r\n            return _createError(err.message, config);\r\n        }\r\n        return element;\r\n    };\r\n    if (!cardConfig || typeof cardConfig !== \"object\" || (!isRow && !cardConfig.type))\r\n        return _createError(\"No type defined\", cardConfig);\r\n    let tag = cardConfig.type;\r\n    if (tag && tag.startsWith(\"custom:\")) {\r\n        tag = tag.substr(\"custom:\".length);\r\n    }\r\n    else if (isRow) {\r\n        if (SPECIAL_TYPES.has(tag)) {\r\n            tag = `hui-${tag}-row`;\r\n        }\r\n        else {\r\n            if (!cardConfig.entity) {\r\n                return _createError(\"Invalid config given.\", cardConfig);\r\n            }\r\n            const domain = cardConfig.entity.split(\".\", 1)[0];\r\n            tag = `hui-${DOMAIN_TO_ELEMENT_TYPE[domain] || \"text\"}-entity-row`;\r\n        }\r\n    }\r\n    else {\r\n        tag = `hui-${tag}-card`;\r\n    }\r\n    if (customElements.get(tag))\r\n        return _createThing(tag, cardConfig);\r\n    // If element doesn't exist (yet) create an error\r\n    const element = _createError(`Custom element doesn't exist: ${cardConfig.type}.`, cardConfig);\r\n    element.style.display = \"None\";\r\n    const timer = setTimeout(() => {\r\n        element.style.display = \"\";\r\n    }, 2000);\r\n    // Remove error if element is defined later\r\n    customElements.whenDefined(cardConfig.type).then(() => {\r\n        clearTimeout(timer);\r\n        fireEvent(element, \"ll-rebuild\", {}, element);\r\n    });\r\n    return element;\r\n};\r\n//# sourceMappingURL=create-thing.js.map","map":"{\"version\":3,\"file\":\"create-thing.js\",\"sourceRoot\":\"\",\"sources\":[\"../../src/create-thing.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/iantrich/Projects/hass/plugins/custom-card-helpers/create-thing.d.ts","writeByteOrderMark":false,"text":"export declare const createThing: (cardConfig: any, isRow?: boolean) => any;\r\n"}}
