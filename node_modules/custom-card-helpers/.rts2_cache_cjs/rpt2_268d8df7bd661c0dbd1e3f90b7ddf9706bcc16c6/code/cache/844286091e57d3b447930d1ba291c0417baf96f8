{"code":"import { STATES_OFF } from \"./const\";\r\nimport { computeDomain } from \"./compute-domain\";\r\nexport const turnOnOffEntities = (hass, entityIds, turnOn = true) => {\r\n    const domainsToCall = {};\r\n    entityIds.forEach((entityId) => {\r\n        if (STATES_OFF.includes(hass.states[entityId].state) === turnOn) {\r\n            const stateDomain = computeDomain(entityId);\r\n            const serviceDomain = [\"cover\", \"lock\"].includes(stateDomain)\r\n                ? stateDomain\r\n                : \"homeassistant\";\r\n            if (!(serviceDomain in domainsToCall)) {\r\n                domainsToCall[serviceDomain] = [];\r\n            }\r\n            domainsToCall[serviceDomain].push(entityId);\r\n        }\r\n    });\r\n    Object.keys(domainsToCall).forEach((domain) => {\r\n        let service;\r\n        switch (domain) {\r\n            case \"lock\":\r\n                service = turnOn ? \"unlock\" : \"lock\";\r\n                break;\r\n            case \"cover\":\r\n                service = turnOn ? \"open_cover\" : \"close_cover\";\r\n                break;\r\n            default:\r\n                service = turnOn ? \"turn_on\" : \"turn_off\";\r\n        }\r\n        const entities = domainsToCall[domain];\r\n        hass.callService(domain, service, { entity_id: entities });\r\n    });\r\n};\r\n//# sourceMappingURL=turn-on-off-entities.js.map","map":"{\"version\":3,\"file\":\"turn-on-off-entities.js\",\"sourceRoot\":\"\",\"sources\":[\"../../src/turn-on-off-entities.ts\"],\"names\":[],\"mappings\":\"AACA,OAAO,EAAE,UAAU,EAAE,MAAM,SAAS,CAAC;AACrC,OAAO,EAAE,aAAa,EAAE,MAAM,kBAAkB,CAAC;AAEjD,MAAM,CAAC,MAAM,iBAAiB,GAAG,CAC/B,IAAmB,EACnB,SAAmB,EACnB,MAAM,GAAG,IAAI,EACP,EAAE;IACR,MAAM,aAAa,GAAG,EAAE,CAAC;IACzB,SAAS,CAAC,OAAO,CAAC,CAAC,QAAQ,EAAE,EAAE;QAC7B,IAAI,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,KAAK,CAAC,KAAK,MAAM,EAAE;YAC/D,MAAM,WAAW,GAAG,aAAa,CAAC,QAAQ,CAAC,CAAC;YAC5C,MAAM,aAAa,GAAG,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC,QAAQ,CAAC,WAAW,CAAC;gBAC3D,CAAC,CAAC,WAAW;gBACb,CAAC,CAAC,eAAe,CAAC;YAEpB,IAAI,CAAC,CAAC,aAAa,IAAI,aAAa,CAAC,EAAE;gBACrC,aAAa,CAAC,aAAa,CAAC,GAAG,EAAE,CAAC;aACnC;YACD,aAAa,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;SAC7C;IACH,CAAC,CAAC,CAAC;IAEH,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,OAAO,CAAC,CAAC,MAAM,EAAE,EAAE;QAC5C,IAAI,OAAO,CAAC;QACZ,QAAQ,MAAM,EAAE;YACd,KAAK,MAAM;gBACT,OAAO,GAAG,MAAM,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC;gBACrC,MAAM;YACR,KAAK,OAAO;gBACV,OAAO,GAAG,MAAM,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,aAAa,CAAC;gBAChD,MAAM;YACR;gBACE,OAAO,GAAG,MAAM,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,UAAU,CAAC;SAC7C;QAED,MAAM,QAAQ,GAAG,aAAa,CAAC,MAAM,CAAC,CAAC;QACvC,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,OAAO,EAAE,EAAE,SAAS,EAAE,QAAQ,EAAE,CAAC,CAAC;IAC7D,CAAC,CAAC,CAAC;AACL,CAAC,CAAC\"}","dts":{"name":"/home/iantrich/Projects/hass/plugins/custom-card-helpers/turn-on-off-entities.d.ts","writeByteOrderMark":false,"text":"import { HomeAssistant } from \"./types\";\r\nexport declare const turnOnOffEntities: (hass: HomeAssistant, entityIds: string[], turnOn?: boolean) => void;\r\n"}}
