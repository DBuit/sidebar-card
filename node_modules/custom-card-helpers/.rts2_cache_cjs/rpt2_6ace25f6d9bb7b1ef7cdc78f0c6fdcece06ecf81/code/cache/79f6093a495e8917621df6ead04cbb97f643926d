{"code":"import { fireEvent } from \"./fire-event\";\r\nimport { forwardHaptic } from \"./haptic\";\r\nimport { navigate } from \"./navigate\";\r\nimport { toggleEntity } from \"./toggle-entity\";\r\nexport const handleClick = (node, hass, config, hold, dblClick) => {\r\n    let actionConfig;\r\n    if (dblClick && config.double_tap_action) {\r\n        actionConfig = config.double_tap_action;\r\n    }\r\n    else if (hold && config.hold_action) {\r\n        actionConfig = config.hold_action;\r\n    }\r\n    else if (!hold && config.tap_action) {\r\n        actionConfig = config.tap_action;\r\n    }\r\n    if (!actionConfig) {\r\n        actionConfig = {\r\n            action: \"more-info\"\r\n        };\r\n    }\r\n    if (actionConfig.confirmation &&\r\n        (!actionConfig.confirmation.exemptions ||\r\n            !actionConfig.confirmation.exemptions.some(e => e.user === hass.user.id))) {\r\n        if (!confirm(actionConfig.confirmation.text ||\r\n            `Are you sure you want to ${actionConfig.action}?`)) {\r\n            return;\r\n        }\r\n    }\r\n    switch (actionConfig.action) {\r\n        case \"more-info\":\r\n            if (actionConfig.entity || config.entity || config.camera_image) {\r\n                fireEvent(node, \"hass-more-info\", {\r\n                    entityId: actionConfig.entity\r\n                        ? actionConfig.entity\r\n                        : config.entity\r\n                            ? config.entity\r\n                            : config.camera_image\r\n                });\r\n                if (actionConfig.haptic)\r\n                    forwardHaptic(actionConfig.haptic);\r\n            }\r\n            break;\r\n        case \"navigate\":\r\n            if (actionConfig.navigation_path) {\r\n                navigate(node, actionConfig.navigation_path);\r\n                if (actionConfig.haptic)\r\n                    forwardHaptic(actionConfig.haptic);\r\n            }\r\n            break;\r\n        case \"url\":\r\n            actionConfig.url_path && window.open(actionConfig.url_path);\r\n            if (actionConfig.haptic)\r\n                forwardHaptic(actionConfig.haptic);\r\n            break;\r\n        case \"toggle\":\r\n            if (config.entity) {\r\n                toggleEntity(hass, config.entity);\r\n                if (actionConfig.haptic)\r\n                    forwardHaptic(actionConfig.haptic);\r\n            }\r\n            break;\r\n        case \"call-service\": {\r\n            if (!actionConfig.service) {\r\n                return;\r\n            }\r\n            const [domain, service] = actionConfig.service.split(\".\", 2);\r\n            const serviceData = { ...actionConfig.service_data };\r\n            if (serviceData.entity_id === \"entity\") {\r\n                serviceData.entity_id = config.entity;\r\n            }\r\n            hass.callService(domain, service, serviceData);\r\n            if (actionConfig.haptic)\r\n                forwardHaptic(actionConfig.haptic);\r\n        }\r\n    }\r\n};\r\n//# sourceMappingURL=handle-click.js.map","map":"{\"version\":3,\"file\":\"handle-click.js\",\"sourceRoot\":\"\",\"sources\":[\"../../src/handle-click.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/iantrich/Projects/hass/plugins/custom-card-helpers/handle-click.d.ts","writeByteOrderMark":false,"text":"import { HomeAssistant, ActionConfig } from \"./types\";\r\nexport declare const handleClick: (node: HTMLElement, hass: HomeAssistant, config: {\r\n    entity?: string;\r\n    camera_image?: string;\r\n    hold_action?: ActionConfig;\r\n    tap_action?: ActionConfig;\r\n    double_tap_action?: ActionConfig;\r\n}, hold: boolean, dblClick: boolean) => void;\r\n"}}
