{"code":"import { formatDateTime } from \"./datetime/format_date_time\";\r\nimport { formatDate } from \"./datetime/format_date\";\r\nimport { formatTime } from \"./datetime/format_time\";\r\nimport { computeStateDomain } from \"./compute-state-domain\";\r\nexport function computeStateDisplay(localize, stateObj, language) {\r\n    if (stateObj.state === \"unknown\" || stateObj.state === \"unavailable\") {\r\n        return localize(`state.default.${stateObj.state}`);\r\n    }\r\n    if (stateObj.attributes.unit_of_measurement) {\r\n        return `${stateObj.state} ${stateObj.attributes.unit_of_measurement}`;\r\n    }\r\n    const domain = computeStateDomain(stateObj);\r\n    if (domain === \"input_datetime\") {\r\n        let date;\r\n        if (!stateObj.attributes.has_time) {\r\n            date = new Date(stateObj.attributes.year, stateObj.attributes.month - 1, stateObj.attributes.day);\r\n            return formatDate(date, language);\r\n        }\r\n        if (!stateObj.attributes.has_date) {\r\n            const now = new Date();\r\n            date = new Date(\r\n            // Due to bugs.chromium.org/p/chromium/issues/detail?id=797548\r\n            // don't use artificial 1970 year.\r\n            now.getFullYear(), now.getMonth(), now.getDay(), stateObj.attributes.hour, stateObj.attributes.minute);\r\n            return formatTime(date, language);\r\n        }\r\n        date = new Date(stateObj.attributes.year, stateObj.attributes.month - 1, stateObj.attributes.day, stateObj.attributes.hour, stateObj.attributes.minute);\r\n        return formatDateTime(date, language);\r\n    }\r\n    return (\r\n    // Return device class translation\r\n    (stateObj.attributes.device_class &&\r\n        localize(`component.${domain}.state.${stateObj.attributes.device_class}.${stateObj.state}`)) ||\r\n        // Return default translation\r\n        localize(`component.${domain}.state._.${stateObj.state}`) ||\r\n        // We don't know! Return the raw state.\r\n        stateObj.state);\r\n}\r\n//# sourceMappingURL=compute-state-display.js.map","map":"{\"version\":3,\"file\":\"compute-state-display.js\",\"sourceRoot\":\"\",\"sources\":[\"../../src/compute-state-display.ts\"],\"names\":[],\"mappings\":\"AACA,OAAO,EAAE,cAAc,EAAE,MAAM,6BAA6B,CAAC;AAC7D,OAAO,EAAE,UAAU,EAAE,MAAM,wBAAwB,CAAC;AACpD,OAAO,EAAE,UAAU,EAAE,MAAM,wBAAwB,CAAC;AAEpD,OAAO,EAAE,kBAAkB,EAAE,MAAM,wBAAwB,CAAC;AAE5D,MAAM,UAAU,mBAAmB,CACjC,QAAsB,EACtB,QAAoB,EACpB,QAAgB;IAEhB,IAAI,QAAQ,CAAC,KAAK,KAAK,SAAS,IAAI,QAAQ,CAAC,KAAK,KAAK,aAAa,EAAE;QACpE,OAAO,QAAQ,CAAC,iBAAiB,QAAQ,CAAC,KAAK,EAAE,CAAC,CAAC;KACpD;IAED,IAAI,QAAQ,CAAC,UAAU,CAAC,mBAAmB,EAAE;QAC3C,OAAO,GAAG,QAAQ,CAAC,KAAK,IAAI,QAAQ,CAAC,UAAU,CAAC,mBAAmB,EAAE,CAAC;KACvE;IAED,MAAM,MAAM,GAAG,kBAAkB,CAAC,QAAQ,CAAC,CAAC;IAE5C,IAAI,MAAM,KAAK,gBAAgB,EAAE;QAC/B,IAAI,IAAU,CAAC;QACf,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,QAAQ,EAAE;YACjC,IAAI,GAAG,IAAI,IAAI,CACb,QAAQ,CAAC,UAAU,CAAC,IAAI,EACxB,QAAQ,CAAC,UAAU,CAAC,KAAK,GAAG,CAAC,EAC7B,QAAQ,CAAC,UAAU,CAAC,GAAG,CACxB,CAAC;YACF,OAAO,UAAU,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;SACnC;QACD,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,QAAQ,EAAE;YACjC,MAAM,GAAG,GAAG,IAAI,IAAI,EAAE,CAAC;YACvB,IAAI,GAAG,IAAI,IAAI;YACb,8DAA8D;YAC9D,kCAAkC;YAClC,GAAG,CAAC,WAAW,EAAE,EACjB,GAAG,CAAC,QAAQ,EAAE,EACd,GAAG,CAAC,MAAM,EAAE,EACZ,QAAQ,CAAC,UAAU,CAAC,IAAI,EACxB,QAAQ,CAAC,UAAU,CAAC,MAAM,CAC3B,CAAC;YACF,OAAO,UAAU,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;SACnC;QAED,IAAI,GAAG,IAAI,IAAI,CACb,QAAQ,CAAC,UAAU,CAAC,IAAI,EACxB,QAAQ,CAAC,UAAU,CAAC,KAAK,GAAG,CAAC,EAC7B,QAAQ,CAAC,UAAU,CAAC,GAAG,EACvB,QAAQ,CAAC,UAAU,CAAC,IAAI,EACxB,QAAQ,CAAC,UAAU,CAAC,MAAM,CAC3B,CAAC;QACF,OAAO,cAAc,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;KACvC;IAED,OAAO;IACL,kCAAkC;IAClC,CAAC,QAAQ,CAAC,UAAU,CAAC,YAAY;QAC/B,QAAQ,CACN,aAAa,MAAM,UAAU,QAAQ,CAAC,UAAU,CAAC,YAAY,IAAI,QAAQ,CAAC,KAAK,EAAE,CAClF,CAAC;QACJ,6BAA6B;QAC7B,QAAQ,CAAC,aAAa,MAAM,YAAY,QAAQ,CAAC,KAAK,EAAE,CAAC;QACzD,uCAAuC;QACvC,QAAQ,CAAC,KAAK,CACf,CAAC;AACJ,CAAC\"}","dts":{"name":"/home/iantrich/Projects/hass/plugins/custom-card-helpers/compute-state-display.d.ts","writeByteOrderMark":false,"text":"import { HassEntity } from \"home-assistant-js-websocket\";\r\nimport { LocalizeFunc } from \"./translations/localize\";\r\nexport declare function computeStateDisplay(localize: LocalizeFunc, stateObj: HassEntity, language: string): string;\r\n"}}
